{% extends "base.html" %}

{% block title %} Pheonix: Plumage {% end %}

{% block body %}

      <div class="panel panel-info">
          <div class="panel-heading">{{ capitalize(mode) }} Render Jobs</div>         
          <table class="table table-striped table-hover" id="jobstatus-table">
              <thead>
              <tr>
                  <th>Job Id</th>
                  <th>Scene</th>
                  <th>Total Frames</th>
                  <th>Percent Complete</th>
                  <th>{% if mode=='completed' %}Finished on{% else %}Expected ETA{% end %}</th>
              </tr>
              </thead>
              <tbody class="rowlink" data-link="row">
                  {% for job in job_data %}
                  <tr>
                      <td>
                          <a href="/view_job?jobid={{ job.id }}">{{ job.id }}</a>
                      </td>
                      <td>{{ job.scene }}</td>
                      <td>{{ job.frame_end - job.frame_start + 1 }}</td>
                      <td>
                          <div class="progress">
                              {% if integer(job.p_f_complete) > 0 %}
                              <div class="progress-bar progress-bar-success" role="progressbar" style="width:{{ job.p_f_complete }}%">
                                  {{ integer(job.p_f_complete) }}%
                              </div>
                              {% end %}
                              {% if integer(job.p_f_failed) > 0 %}
                              <div class="progress-bar progress-bar-danger" role="progressbar" style="width:{{ job.p_f_failed }}%">
                                  {{ integer(job.p_f_failed) }}%
                              </div>
                              {% end %}
                          </div>
                      </td>
                      <td>{% if mode=='completed' %}{% if job.end!=None and job.start!=None %}{{ job.end-job.start }}{% end %}{% else %}{{ job.eta - now }}{% end %}</td>
                  </tr>
                  {% end %}
              </tbody>
          </table>
      </div>

     
{% end %}


{% block scripthook %}
      
      <script>
       $('tbody.rowlink').rowlink()       
      </script>

{% end %}
